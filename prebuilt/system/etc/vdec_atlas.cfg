MEMORY_MAP

-- =============================  MSVDX  ============================= --
--          <name>      <dev_base>  <mem_base>  <mem_size>  <gb>    <flags>
DEVICE      VDEC        0x00000000  0x00000000  0x10000000  0       0x000000000

-- Multicore sync RAM
REGISTER   REG_MSVDX_SYNCRAM            VDEC 0x0000D000 0x1000      NO_IRQ

-- Core0 registers
REGISTER   C0_REG_MSVDX_MTX                 VDEC 0x00000000 1024        NO_IRQ
REGISTER   C0_REG_MSVDX_VDMC                VDEC 0x00000400 128         NO_IRQ
REGISTER   C0_REG_MSVDX_VDEB                VDEC 0x00000480 128         NO_IRQ
REGISTER   C0_REG_MSVDX_DMAC                VDEC 0x00000500 256         NO_IRQ
REGISTER   C0_REG_MSVDX_DMAC_00             VDEC 0x00000500 0x00000020  20
REGISTER   C0_REG_MSVDX_DMAC_01             VDEC 0x00000520 0x00000020  21
REGISTER   C0_REG_MSVDX_DMAC_02             VDEC 0x00000540 0x00000020  22
REGISTER   C0_REG_MSVDX_DMAC_03             VDEC 0x00000560 0x00000020  23
REGISTER   C0_REG_MSVDX_DMAC_04             VDEC 0x00000580 0x00000020  24
REGISTER   C0_REG_MSVDX_DMAC_05             VDEC 0x000005A0 0x00000020  25
REGISTER   C0_REG_MSVDX_SYS                 VDEC 0x00000600 256         0
REGISTER   C0_REG_MSVDX_VEC_IQRAM           VDEC 0x00000700 256         NO_IRQ
REGISTER   C0_REG_MSVDX_VEC                 VDEC 0x00000800 2048        NO_IRQ
REGISTER   C0_REG_MSVDX_CMD                 VDEC 0x00001000 4096        NO_IRQ
REGISTER   C0_REG_MSVDX_VEC_RAM             VDEC 0x00002000 4096        NO_IRQ
REGISTER   C0_REG_MSVDX_VEC_VLC             VDEC 0x00003000 8184        NO_IRQ
REGISTER   C0_REG_MSVDX_VEC_LINE_STORE      VDEC 0x00006000 4096        NO_IRQ
REGISTER   C0_REG_MSVDX_VEC_LINE_STORE_2    VDEC 0x00007000 4096        NO_IRQ
REGISTER   C0_REG_MSVDX_CORE_TEST           VDEC 0x00007F00 240         NO_IRQ
REGISTER   C0_REG_MSVDX_TEST                VDEC 0x00007FF0 16          NO_IRQ
REGISTER   C0_REG_MSVDX_VEC_RAM_2           VDEC 0x00008000 4096        NO_IRQ
REGISTER   C0_REG_MSVDX_PIN_TEST            VDEC 0x0000F000 512         NO_IRQ
REGISTER   C0_REG_MSVDX_CORE_TEST_2         VDEC 0x0000FF00 240         NO_IRQ
REGISTER   C0_REG_MSVDX_TEST_2              VDEC 0x0000FFF0 16          NO_IRQ
REGISTER   C0_REG_MSVDX_TEST_3              VDEC 0x0000FFC0 24          NO_IRQ


-- Core1 registers 
REGISTER   C1_REG_MSVDX_MTX                 VDEC 0x00010000 1024        NO_IRQ
REGISTER   C1_REG_MSVDX_VDMC                VDEC 0x00010400 128         NO_IRQ
REGISTER   C1_REG_MSVDX_VDEB                VDEC 0x00010480 128         NO_IRQ
REGISTER   C1_REG_MSVDX_DMAC                VDEC 0x00010500 256         NO_IRQ
REGISTER   C1_REG_MSVDX_DMAC_00             VDEC 0x00010500 0x00000020  20
REGISTER   C1_REG_MSVDX_DMAC_01             VDEC 0x00010520 0x00000020  21
REGISTER   C1_REG_MSVDX_DMAC_02             VDEC 0x00010540 0x00000020  22
REGISTER   C1_REG_MSVDX_DMAC_03             VDEC 0x00010560 0x00000020  23
REGISTER   C1_REG_MSVDX_DMAC_04             VDEC 0x00010580 0x00000020  24
REGISTER   C1_REG_MSVDX_DMAC_05             VDEC 0x000105A0 0x00000020  25
REGISTER   C1_REG_MSVDX_SYS                 VDEC 0x00010600 256         0
REGISTER   C1_REG_MSVDX_VEC_IQRAM           VDEC 0x00010700 256         NO_IRQ
REGISTER   C1_REG_MSVDX_VEC                 VDEC 0x00010800 2048        NO_IRQ
REGISTER   C1_REG_MSVDX_CMD                 VDEC 0x00011000 4096        NO_IRQ
REGISTER   C1_REG_MSVDX_VEC_RAM             VDEC 0x00012000 4096        NO_IRQ
REGISTER   C1_REG_MSVDX_VEC_VLC             VDEC 0x00013000 8184        NO_IRQ
REGISTER   C1_REG_MSVDX_VEC_LINE_STORE      VDEC 0x00016000 4096        NO_IRQ
REGISTER   C1_REG_MSVDX_VEC_LINE_STORE_2    VDEC 0x00017000 4096        NO_IRQ
REGISTER   C1_REG_MSVDX_CORE_TEST           VDEC 0x00017F00 240         NO_IRQ
REGISTER   C1_REG_MSVDX_TEST                VDEC 0x00017FF0 16          NO_IRQ
REGISTER   C1_REG_MSVDX_VEC_RAM_2           VDEC 0x00018000 4096        NO_IRQ
REGISTER   C1_REG_MSVDX_PIN_TEST            VDEC 0x0001F000 512         NO_IRQ
REGISTER   C1_REG_MSVDX_CORE_TEST_2         VDEC 0x0001FF00 240         NO_IRQ
REGISTER   C1_REG_MSVDX_TEST_2              VDEC 0x0001FFF0 16          NO_IRQ
REGISTER   C1_REG_MSVDX_TEST_3              VDEC 0x0000FFC0 24          NO_IRQ

-- Core2 registers
REGISTER   C2_REG_MSVDX_MTX                 VDEC 0x00020000 1024        NO_IRQ
REGISTER   C2_REG_MSVDX_VDMC                VDEC 0x00020400 128         NO_IRQ
REGISTER   C2_REG_MSVDX_VDEB                VDEC 0x00020480 128         NO_IRQ
REGISTER   C2_REG_MSVDX_DMAC                VDEC 0x00020500 256         NO_IRQ
REGISTER   C2_REG_MSVDX_DMAC_00             VDEC 0x00020500 0x00000020  20
REGISTER   C2_REG_MSVDX_DMAC_01             VDEC 0x00020520 0x00000020  21
REGISTER   C2_REG_MSVDX_DMAC_02             VDEC 0x00020540 0x00000020  22
REGISTER   C2_REG_MSVDX_DMAC_03             VDEC 0x00020560 0x00000020  23
REGISTER   C2_REG_MSVDX_DMAC_04             VDEC 0x00020580 0x00000020  24
REGISTER   C2_REG_MSVDX_DMAC_05             VDEC 0x000205A0 0x00000020  25
REGISTER   C2_REG_MSVDX_SYS                 VDEC 0x00020600 256         0
REGISTER   C2_REG_MSVDX_VEC_IQRAM           VDEC 0x00020700 256         NO_IRQ
REGISTER   C2_REG_MSVDX_VEC                 VDEC 0x00020800 2048        NO_IRQ
REGISTER   C2_REG_MSVDX_CMD                 VDEC 0x00021000 4096        NO_IRQ
REGISTER   C2_REG_MSVDX_VEC_RAM             VDEC 0x00022000 4096        NO_IRQ
REGISTER   C2_REG_MSVDX_VEC_VLC             VDEC 0x00023000 8184        NO_IRQ
REGISTER   C2_REG_MSVDX_VEC_LINE_STORE      VDEC 0x00026000 4096        NO_IRQ
REGISTER   C2_REG_MSVDX_VEC_LINE_STORE_2    VDEC 0x00027000 4096        NO_IRQ
REGISTER   C2_REG_MSVDX_CORE_TEST           VDEC 0x00027F00 240         NO_IRQ
REGISTER   C2_REG_MSVDX_TEST                VDEC 0x00027FF0 16          NO_IRQ
REGISTER   C2_REG_MSVDX_VEC_RAM_2           VDEC 0x00028000 4096        NO_IRQ
REGISTER   C2_REG_MSVDX_PIN_TEST            VDEC 0x0002F000 512         NO_IRQ
REGISTER   C2_REG_MSVDX_CORE_TEST_2         VDEC 0x0002FF00 240         NO_IRQ
REGISTER   C2_REG_MSVDX_TEST_2              VDEC 0x0002FFF0 16          NO_IRQ
REGISTER   C2_REG_MSVDX_TEST_3              VDEC 0x0000FFC0 24          NO_IRQ


--------------------------------  FAKEMTX  --------------------------------
--          <name>      <dev_base>  <mem_base>  <size>      <gb>    <flags>
DEVICE      FAKEMTX     0x00000000  0x00000000  0x00000000  0       0x00000100

-- Core0
REGISTER    C0_FAKE_REG_MSVDX_MTX           FAKEMTX 0x00000000 1024     NO_IRQ
REGISTER    C0_FAKE_REG_MSVDX_SYS           FAKEMTX 0x00000600 256      0
REGISTER    C0_FAKE_REG_MSVDX_VEC_RAM       FAKEMTX 0x00002000 4096     NO_IRQ
REGISTER    C0_FAKE_REG_MSVDX_VEC_RAM_BE    FAKEMTX 0x00002000 4096     NO_IRQ
REGISTER    C0_FAKE_REG_MSVDX_VEC_RAM_2     FAKEMTX 0x00008000 4096     NO_IRQ

-- Core1
REGISTER    C1_FAKE_REG_MSVDX_MTX           FAKEMTX  0x00010000 1024    NO_IRQ
REGISTER    C1_FAKE_REG_MSVDX_SYS           FAKEMTX  0x00010600 256     0
REGISTER    C1_FAKE_REG_MSVDX_VEC_RAM       FAKEMTX  0x00012000 4096    NO_IRQ
REGISTER    C1_FAKE_REG_MSVDX_VEC_RAM_BE    FAKEMTX  0x00012000 4096    NO_IRQ
REGISTER    C1_FAKE_REG_MSVDX_VEC_RAM_2     FAKEMTX  0x00018000 4096    NO_IRQ

-- Core2
REGISTER    C2_FAKE_REG_MSVDX_MTX           FAKEMTX  0x00020000 1024    NO_IRQ
REGISTER    C2_FAKE_REG_MSVDX_SYS           FAKEMTX  0x00020600 256     0
REGISTER    C2_FAKE_REG_MSVDX_VEC_RAM       FAKEMTX  0x00022000 4096    NO_IRQ
REGISTER    C2_FAKE_REG_MSVDX_VEC_RAM_BE    FAKEMTX  0x00022000 4096    NO_IRQ
REGISTER    C2_FAKE_REG_MSVDX_VEC_RAM_2     FAKEMTX  0x00028000 4096    NO_IRQ

MEMORY MEM         VDEC
MEMORY MEMBE       VDEC 
MEMORY MEMDMAC_00  VDEC 
MEMORY MEMDMAC_01  VDEC 
MEMORY MEMDMAC_02  VDEC 
MEMORY MEMDMAC_03  VDEC  
MEMORY MEMDMAC_04  VDEC   
MEMORY MEMDMAC_05  VDEC  

END_MEMORY_MAP


-- ===============================  PDUMP  ============================== --
PDUMP

--CONTEXT C0_DMAC_Ch2     C0_REG_MSVDX_DMAC_02 MEMDMAC_02 
--CONTEXT C0_DMAC_Ch3     C0_REG_MSVDX_DMAC_03 MEMDMAC_03
--CONTEXT C0_DMAC_Ch4     C0_REG_MSVDX_DMAC_04 MEMDMAC_04
--CONTEXT C0_DMAC_Ch5     C0_REG_MSVDX_DMAC_05 MEMDMAC_05

--CONTEXT C0_MSVDX        C0_REG_MSVDX_TEST C0_REG_MSVDX_TEST_2 MEM MEMBE C0_REG_MSVDX_MTX C0_REG_MSVDX_SYS C0_REG_MSVDX_VEC C0_REG_MSVDX_VDMC C0_REG_MSVDX_VDEB C0_REG_MSVDX_VEC_IQRAM C0_REG_MSVDX_CMD C0_REG_MSVDX_VEC_RAM C0_REG_MSVDX_VEC_RAM_2 C0_REG_MSVDX_VEC_VLC C0_REG_MSVDX_DMAC_00 C0_REG_MSVDX_DMAC_01 MEMDMAC_00 MEMDMAC_01 C0_REG_MSVDX_DMAC C0_REG_MSVDX_VEC_LINE_STORE C0_REG_MSVDX_VEC_LINE_STORE_2 C0_FAKE_REG_MSVDX_MTX C0_FAKE_REG_MSVDX_SYS C0_FAKE_REG_MSVDX_VEC_RAM C0_FAKE_REG_MSVDX_VEC_RAM_BE C0_FAKE_REG_MSVDX_VEC_RAM_2 C0_REG_MSVDX_PIN_TEST
--CONTEXT C1_MSVDX        C1_REG_MSVDX_TEST C1_REG_MSVDX_TEST_2           C1_REG_MSVDX_MTX C1_REG_MSVDX_SYS C1_REG_MSVDX_VEC C1_REG_MSVDX_VDMC C1_REG_MSVDX_VDEB C1_REG_MSVDX_VEC_IQRAM C1_REG_MSVDX_CMD C1_REG_MSVDX_VEC_RAM C1_REG_MSVDX_VEC_RAM_2 C1_REG_MSVDX_VEC_VLC C1_REG_MSVDX_DMAC_00 C1_REG_MSVDX_DMAC_01                       C1_REG_MSVDX_DMAC C1_REG_MSVDX_VEC_LINE_STORE C1_REG_MSVDX_VEC_LINE_STORE_2 C1_FAKE_REG_MSVDX_MTX C1_FAKE_REG_MSVDX_SYS C1_FAKE_REG_MSVDX_VEC_RAM C1_FAKE_REG_MSVDX_VEC_RAM_BE C1_FAKE_REG_MSVDX_VEC_RAM_2 C1_REG_MSVDX_PIN_TEST
--CONTEXT C2_MSVDX        C2_REG_MSVDX_TEST C2_REG_MSVDX_TEST_2           C2_REG_MSVDX_MTX C2_REG_MSVDX_SYS C2_REG_MSVDX_VEC C2_REG_MSVDX_VDMC C2_REG_MSVDX_VDEB C2_REG_MSVDX_VEC_IQRAM C2_REG_MSVDX_CMD C2_REG_MSVDX_VEC_RAM C2_REG_MSVDX_VEC_RAM_2 C2_REG_MSVDX_VEC_VLC C2_REG_MSVDX_DMAC_00 C2_REG_MSVDX_DMAC_01                       C2_REG_MSVDX_DMAC C2_REG_MSVDX_VEC_LINE_STORE C2_REG_MSVDX_VEC_LINE_STORE_2 C2_FAKE_REG_MSVDX_MTX C2_FAKE_REG_MSVDX_SYS C2_FAKE_REG_MSVDX_VEC_RAM C2_FAKE_REG_MSVDX_VEC_RAM_BE C2_FAKE_REG_MSVDX_VEC_RAM_2 C2_REG_MSVDX_PIN_TEST

END_PDUMP


-- =============================  PCI WRAPPER  ============================ --
WRAPPER
CONTROL 1000 0x00000000
PCI_CARD_INFO 0x1010 0x1CF1
--                  <name>      <bar>   <base_addr> <size>
PCI_DEVICE_BASE     VDEC        1       0x00000000  0x00020000
PCI_MEMORY_BASE     VDEC        2       0x00000000  0x10000000
PCI_DEVICE_BASE     FAKEMTX     1       0x00000000  0x00000000
PCI_MEMORY_BASE     FAKEMTX     2       0x00030000  0x00010000
--SOCKET_INFO VDEC 4321 localhost
END_WRAPPER

PLATFORM_INIT
--WRW :REG_MSVDX_SYS:0x0 0x00000100
END_PLATFORM_INIT
